<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.liuyang19900520.robot.life.blog.java.dao.BlogDao">

    <resultMap id="BlogMap" type="com.liuyang19900520.robot.life.blog.java.domain.Blog">
        <id column="id" property="id" jdbcType="BIGINT"/>
        <id column="blog_id" property="blogId" jdbcType="BIGINT"/>
        <id column="blog_title" property="blogTitle" jdbcType="VARCHAR"/>
        <id column="blog_content" property="blogContent" jdbcType="LONGVARCHAR"/>
        <id column="blog_html" property="blogHtml" jdbcType="LONGVARCHAR"/>
        <id column="tags" property="tags" jdbcType="VARCHAR"/>
        <id column="category_id" property="categoryId" jdbcType="BIGINT"/>
        <id column="author_id" property="authorId" jdbcType="BIGINT"/>
        <id column="create_at" property="createAt" jdbcType="TIMESTAMP"/>
        <id column="create_by" property="createBy" jdbcType="BIGINT"/>
        <id column="update_at" property="updateAt" jdbcType="TIMESTAMP"/>
        <id column="update_by" property="updateBy" jdbcType="BIGINT"/>
        <id column="delete_flag" property="deleteFlag" jdbcType="VARCHAR"/>
    </resultMap>

    <resultMap id="TempBlogMap" type="com.liuyang19900520.robot.life.blog.java.domain.Blog">
        <id column="id" property="id" jdbcType="BIGINT"/>
        <id column="temp_blog_id" property="blogId" jdbcType="BIGINT"/>
        <id column="temp_blog_title" property="blogTitle" jdbcType="VARCHAR"/>
        <id column="temp_blog_content" property="blogContent" jdbcType="LONGVARCHAR"/>
        <id column="temp_blog_html" property="blogHtml" jdbcType="LONGVARCHAR"/>
        <id column="temp_tags" property="tags" jdbcType="VARCHAR"/>
        <id column="temp_category_id" property="categoryId" jdbcType="BIGINT"/>
        <id column="temp_author_id" property="authorId" jdbcType="BIGINT"/>
        <id column="create_at" property="createAt" jdbcType="TIMESTAMP"/>
        <id column="create_by" property="createBy" jdbcType="BIGINT"/>
        <id column="update_at" property="updateAt" jdbcType="TIMESTAMP"/>
        <id column="update_by" property="updateBy" jdbcType="BIGINT"/>
        <id column="delete_flag" property="deleteFlag" jdbcType="VARCHAR"/>
    </resultMap>

    <insert id="insertBlog">
        INSERT INTO b_blog
        (blog_id, blog_title, blog_content, blog_html, author_id, tags,category_id,create_at, create_by, update_at, update_by, delete_flag)
        VALUES
        (#{blogId},#{blogTitle},#{blogContent},#{blogHtml},#{authorId},#{tags},#{categoryId},CURRENT_TIME,#{authorId},CURRENT_TIME,#{authorId},'0')
    </insert>
    <insert id="insertTempBlog">

        INSERT INTO b_temp_blog
        (temp_blog_id, temp_blog_title, temp_blog_content, temp_blog_html, temp_author_id, temp_tags,temp_category_id,create_at, create_by, update_at, update_by, delete_flag)
        VALUES
        (#{blogId},#{blogTitle},#{blogContent},#{blogHtml},#{authorId},#{tags},#{categoryId},CURRENT_TIME,#{authorId},CURRENT_TIME,#{authorId},'0')

    </insert>

    <select id="selectBlogsByPage" resultMap="BlogMap">
      SELECT
       blog_id, blog_title, blog_content, blog_html, author_id, tags,create_at, create_by, update_at, update_by, delete_flag
       FROM  b_blog

       ORDER by update_at DESC

    </select>

    <select id="selectBlogByKey" resultMap="BlogMap">
      SELECT
       blog_id, blog_title, blog_content, blog_html, author_id,tags, create_at, create_by, update_at, update_by, delete_flag
       FROM  b_blog
       WHERE blog_id=#{blogId}
    </select>
    <select id="selectTempBlogs" resultMap="TempBlogMap">

        SELECT * FROM b_temp_blog

    </select>
    <select id="selectTempBlogByKey" resultMap="TempBlogMap">

       SELECT
       *
       FROM  b_temp_blog
       WHERE temp_blog_id=#{blogId}

    </select>

</mapper>